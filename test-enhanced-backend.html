<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¢å¼ºç‰ˆåç«¯APIæµ‹è¯•</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
        }
        .container {
            background: rgba(255,255,255,0.95);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
            backdrop-filter: blur(8px);
        }
        h1 {
            text-align: center;
            color: #4c51bf;
            margin-bottom: 30px;
            font-size: 2.5em;
        }
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .test-section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #e2e8f0;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .test-section h3 {
            color: #2d3748;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        .success { border-color: #48bb78; background: #f0fff4; }
        .error { border-color: #f56565; background: #fffaf0; }
        .info { border-color: #4299e1; background: #ebf8ff; }
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            margin: 5px;
            transition: all 0.3s ease;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        .result {
            margin: 15px 0;
            padding: 15px;
            background: #f7fafc;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
            border-left: 4px solid #e2e8f0;
        }
        .success .result { border-left-color: #48bb78; }
        .error .result { border-left-color: #f56565; }
        .info .result { border-left-color: #4299e1; }
        .status-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(76, 81, 191, 0.9);
            color: white;
            padding: 10px 20px;
            text-align: center;
            z-index: 1000;
            backdrop-filter: blur(8px);
        }
        .api-list {
            background: #2d3748;
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        .api-list h3 {
            color: #63b3ed;
            margin-bottom: 15px;
        }
        .api-endpoint {
            background: rgba(255,255,255,0.1);
            padding: 8px 12px;
            margin: 5px 0;
            border-radius: 5px;
            font-family: monospace;
            border-left: 3px solid #63b3ed;
        }
    </style>
</head>
<body>
    <div class="status-bar" id="statusBar">
        ğŸš€ å¢å¼ºç‰ˆåç«¯APIæµ‹è¯•å·¥å…· - å‡†å¤‡å°±ç»ª
    </div>

    <div style="margin-top: 60px;">
        <div class="container">
            <h1>ğŸ”¬ å¢å¼ºç‰ˆåç«¯APIå…¨é¢æµ‹è¯•</h1>
            
            <!-- APIç«¯ç‚¹åˆ—è¡¨ -->
            <div class="api-list">
                <h3>ğŸ“‹ å¯ç”¨APIç«¯ç‚¹</h3>
                <div class="api-endpoint">GET /health - å¥åº·æ£€æŸ¥</div>
                <div class="api-endpoint">POST /api/auth/login - ç”¨æˆ·ç™»å½•</div>
                <div class="api-endpoint">GET /api/auth/me - è·å–ç”¨æˆ·ä¿¡æ¯</div>
                <div class="api-endpoint">GET /api/clinics - é—¨è¯Šåˆ—è¡¨</div>
                <div class="api-endpoint">POST /api/clinics - åˆ›å»ºé—¨è¯Š</div>
                <div class="api-endpoint">GET /api/patients - æ‚£è€…åˆ—è¡¨</div>
                <div class="api-endpoint">GET /api/examinations - æ£€æŸ¥è®°å½•</div>
                <div class="api-endpoint">GET /api/stats/overview - ç»Ÿè®¡æ•°æ®</div>
            </div>

            <!-- æµ‹è¯•åŒºåŸŸ -->
            <div class="test-grid">
                <!-- åŸºç¡€åŠŸèƒ½æµ‹è¯• -->
                <div class="test-section info" id="basicSection">
                    <h3>ğŸ” åŸºç¡€åŠŸèƒ½æµ‹è¯•</h3>
                    <button onclick="testBasicAPIs()">è¿è¡ŒåŸºç¡€æµ‹è¯•</button>
                    <div id="basicResult" class="result">ç‚¹å‡»è¿è¡ŒåŸºç¡€åŠŸèƒ½æµ‹è¯•...</div>
                </div>

                <!-- è®¤è¯ç³»ç»Ÿæµ‹è¯• -->
                <div class="test-section" id="authSection">
                    <h3>ğŸ” è®¤è¯ç³»ç»Ÿæµ‹è¯•</h3>
                    <button onclick="testAuthFlow()">æµ‹è¯•è®¤è¯æµç¨‹</button>
                    <div id="authResult" class="result">ç‚¹å‡»æµ‹è¯•è®¤è¯ç³»ç»Ÿ...</div>
                </div>

                <!-- é—¨è¯Šç®¡ç†æµ‹è¯• -->
                <div class="test-section" id="clinicSection">
                    <h3>ğŸ¥ é—¨è¯Šç®¡ç†æµ‹è¯•</h3>
                    <button onclick="testClinicAPIs()">æµ‹è¯•é—¨è¯ŠAPI</button>
                    <button onclick="testCreateClinic()">æµ‹è¯•åˆ›å»ºé—¨è¯Š</button>
                    <div id="clinicResult" class="result">ç‚¹å‡»æµ‹è¯•é—¨è¯Šç®¡ç†...</div>
                </div>

                <!-- æ‚£è€…ç®¡ç†æµ‹è¯• -->
                <div class="test-section" id="patientSection">
                    <h3>ğŸ‘¥ æ‚£è€…ç®¡ç†æµ‹è¯•</h3>
                    <button onclick="testPatientAPIs()">æµ‹è¯•æ‚£è€…API</button>
                    <div id="patientResult" class="result">ç‚¹å‡»æµ‹è¯•æ‚£è€…ç®¡ç†...</div>
                </div>

                <!-- ç»Ÿè®¡æ•°æ®æµ‹è¯• -->
                <div class="test-section" id="statsSection">
                    <h3>ğŸ“Š ç»Ÿè®¡æ•°æ®æµ‹è¯•</h3>
                    <button onclick="testStatsAPI()">æµ‹è¯•ç»Ÿè®¡API</button>
                    <div id="statsResult" class="result">ç‚¹å‡»æµ‹è¯•ç»Ÿè®¡æ•°æ®...</div>
                </div>

                <!-- å…¨é¢æµ‹è¯• -->
                <div class="test-section" id="fullSection">
                    <h3>ğŸ¯ å…¨é¢åŠŸèƒ½æµ‹è¯•</h3>
                    <button onclick="runFullTest()" style="background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);">è¿è¡Œå®Œæ•´æµ‹è¯•</button>
                    <div id="fullResult" class="result">ç‚¹å‡»è¿è¡Œå®Œæ•´ç³»ç»Ÿæµ‹è¯•...</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const API_BASE = 'http://localhost:3001';
        let authToken = '';

        function updateStatus(message) {
            document.getElementById('statusBar').textContent = message;
        }

        function updateResult(sectionId, content, type = 'info') {
            const section = document.getElementById(sectionId);
            const resultDiv = section.querySelector('.result');
            resultDiv.textContent = content;
            section.className = 'test-section ' + type;
        }

        async function testBasicAPIs() {
            updateStatus('ğŸ” æµ‹è¯•åŸºç¡€APIåŠŸèƒ½...');
            let result = 'ğŸš€ åŸºç¡€åŠŸèƒ½æµ‹è¯•å¼€å§‹...\n\n';

            try {
                // æµ‹è¯•å¥åº·æ£€æŸ¥
                result += '1. å¥åº·æ£€æŸ¥æµ‹è¯•:\n';
                const healthResponse = await fetch(`${API_BASE}/health`);
                const healthData = await healthResponse.json();
                
                if (healthResponse.ok) {
                    result += `   âœ… å¥åº·æ£€æŸ¥æˆåŠŸ (${healthResponse.status})\n`;
                    result += `   ğŸ“Š æœåŠ¡çŠ¶æ€: ${healthData.status}\n`;
                    result += `   ğŸ• å“åº”æ—¶é—´: ${healthData.timestamp}\n`;
                    result += `   ğŸ’¾ æ•°æ®åº“: ${healthData.services.database}\n\n`;
                } else {
                    result += `   âŒ å¥åº·æ£€æŸ¥å¤±è´¥: ${healthResponse.status}\n\n`;
                }

                updateResult('basicSection', result, 'success');
                updateStatus('âœ… åŸºç¡€åŠŸèƒ½æµ‹è¯•å®Œæˆ');

            } catch (error) {
                result += `âŒ æµ‹è¯•å¤±è´¥: ${error.message}\n`;
                updateResult('basicSection', result, 'error');
                updateStatus('âŒ åŸºç¡€åŠŸèƒ½æµ‹è¯•å¤±è´¥');
            }
        }

        async function testAuthFlow() {
            updateStatus('ğŸ” æµ‹è¯•è®¤è¯æµç¨‹...');
            let result = 'ğŸ” è®¤è¯ç³»ç»Ÿæµ‹è¯•å¼€å§‹...\n\n';

            try {
                // æµ‹è¯•ç™»å½•
                result += '1. ç”¨æˆ·ç™»å½•æµ‹è¯•:\n';
                const loginResponse = await fetch(`${API_BASE}/api/auth/login`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        email: 'super@admin.com',
                        password: 'admin123'
                    })
                });

                const loginData = await loginResponse.json();

                if (loginResponse.ok && loginData.success) {
                    authToken = loginData.data.token;
                    result += `   âœ… ç™»å½•æˆåŠŸ (${loginResponse.status})\n`;
                    result += `   ğŸ‘¤ ç”¨æˆ·: ${loginData.data.user.fullName}\n`;
                    result += `   ğŸ­ è§’è‰²: ${loginData.data.user.role}\n`;
                    result += `   ğŸ”‘ Token: ${authToken.substring(0, 30)}...\n\n`;

                    // æµ‹è¯•è®¤è¯çŠ¶æ€
                    result += '2. è®¤è¯çŠ¶æ€æ£€æŸ¥:\n';
                    const meResponse = await fetch(`${API_BASE}/api/auth/me`, {
                        headers: { 'Authorization': `Bearer ${authToken}` }
                    });

                    const meData = await meResponse.json();

                    if (meResponse.ok && meData.success) {
                        result += `   âœ… è®¤è¯çŠ¶æ€æ­£å¸¸\n`;
                        result += `   ğŸ“‹ ç”¨æˆ·ä¿¡æ¯éªŒè¯æˆåŠŸ\n`;
                    } else {
                        result += `   âŒ è®¤è¯çŠ¶æ€æ£€æŸ¥å¤±è´¥\n`;
                    }

                } else {
                    result += `   âŒ ç™»å½•å¤±è´¥: ${loginData.error || 'æœªçŸ¥é”™è¯¯'}\n`;
                }

                updateResult('authSection', result, 'success');
                updateStatus('âœ… è®¤è¯æµç¨‹æµ‹è¯•å®Œæˆ');

            } catch (error) {
                result += `âŒ è®¤è¯æµ‹è¯•å¤±è´¥: ${error.message}\n`;
                updateResult('authSection', result, 'error');
                updateStatus('âŒ è®¤è¯æµç¨‹æµ‹è¯•å¤±è´¥');
            }
        }

        async function testClinicAPIs() {
            if (!authToken) {
                updateResult('clinicSection', 'âŒ è¯·å…ˆå®Œæˆè®¤è¯æµ‹è¯•è·å–Token', 'error');
                return;
            }

            updateStatus('ğŸ¥ æµ‹è¯•é—¨è¯Šç®¡ç†API...');
            let result = 'ğŸ¥ é—¨è¯Šç®¡ç†APIæµ‹è¯•å¼€å§‹...\n\n';

            try {
                // è·å–é—¨è¯Šåˆ—è¡¨
                result += '1. è·å–é—¨è¯Šåˆ—è¡¨:\n';
                const clinicsResponse = await fetch(`${API_BASE}/api/clinics?page=1&limit=10`, {
                    headers: { 'Authorization': `Bearer ${authToken}` }
                });

                const clinicsData = await clinicsResponse.json();

                if (clinicsResponse.ok && clinicsData.success) {
                    result += `   âœ… é—¨è¯Šåˆ—è¡¨è·å–æˆåŠŸ (${clinicsResponse.status})\n`;
                    result += `   ğŸ“Š é—¨è¯Šæ€»æ•°: ${clinicsData.data.pagination.total}\n`;
                    result += `   ğŸ“‹ å½“å‰é¡µæ•°æ®: ${clinicsData.data.clinics.length}ä¸ª\n\n`;

                    clinicsData.data.clinics.forEach((clinic, index) => {
                        result += `   ${index + 1}. ${clinic.name} (${clinic.code})\n`;
                        result += `      ğŸ“ åœ°å€: ${clinic.address}\n`;
                        result += `      ğŸ‘¥ ç”¨æˆ·: ${clinic._count.users} | æ‚£è€…: ${clinic._count.patients}\n\n`;
                    });
                } else {
                    result += `   âŒ é—¨è¯Šåˆ—è¡¨è·å–å¤±è´¥: ${clinicsData.error}\n`;
                }

                updateResult('clinicSection', result, 'success');
                updateStatus('âœ… é—¨è¯Šç®¡ç†APIæµ‹è¯•å®Œæˆ');

            } catch (error) {
                result += `âŒ é—¨è¯ŠAPIæµ‹è¯•å¤±è´¥: ${error.message}\n`;
                updateResult('clinicSection', result, 'error');
                updateStatus('âŒ é—¨è¯Šç®¡ç†APIæµ‹è¯•å¤±è´¥');
            }
        }

        async function testCreateClinic() {
            if (!authToken) {
                updateResult('clinicSection', 'âŒ è¯·å…ˆå®Œæˆè®¤è¯æµ‹è¯•è·å–Token', 'error');
                return;
            }

            updateStatus('ğŸ¥ æµ‹è¯•åˆ›å»ºé—¨è¯Š...');
            
            try {
                const newClinic = {
                    name: 'æµ‹è¯•å£è…”è¯Šæ‰€',
                    code: 'TEST' + Date.now(),
                    address: 'æµ‹è¯•åœ°å€123å·',
                    phone: '400-123-4567',
                    email: 'test@clinic.com'
                };

                const createResponse = await fetch(`${API_BASE}/api/clinics`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${authToken}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(newClinic)
                });

                const createData = await createResponse.json();
                let result = 'ğŸ†• åˆ›å»ºé—¨è¯Šæµ‹è¯•:\n\n';

                if (createResponse.ok && createData.success) {
                    result += `âœ… é—¨è¯Šåˆ›å»ºæˆåŠŸ!\n`;
                    result += `ğŸ“‹ é—¨è¯ŠID: ${createData.data.clinic.id}\n`;
                    result += `ğŸ¥ é—¨è¯Šåç§°: ${createData.data.clinic.name}\n`;
                    result += `ğŸ“ é—¨è¯Šä»£ç : ${createData.data.clinic.code}\n`;
                } else {
                    result += `âŒ é—¨è¯Šåˆ›å»ºå¤±è´¥: ${createData.error}\n`;
                }

                const currentResult = document.getElementById('clinicSection').querySelector('.result').textContent;
                updateResult('clinicSection', currentResult + '\n' + result, 'success');
                updateStatus('âœ… åˆ›å»ºé—¨è¯Šæµ‹è¯•å®Œæˆ');

            } catch (error) {
                updateResult('clinicSection', `âŒ åˆ›å»ºé—¨è¯Šå¤±è´¥: ${error.message}`, 'error');
                updateStatus('âŒ åˆ›å»ºé—¨è¯Šæµ‹è¯•å¤±è´¥');
            }
        }

        async function testPatientAPIs() {
            if (!authToken) {
                updateResult('patientSection', 'âŒ è¯·å…ˆå®Œæˆè®¤è¯æµ‹è¯•è·å–Token', 'error');
                return;
            }

            updateStatus('ğŸ‘¥ æµ‹è¯•æ‚£è€…ç®¡ç†API...');
            let result = 'ğŸ‘¥ æ‚£è€…ç®¡ç†APIæµ‹è¯•å¼€å§‹...\n\n';

            try {
                const patientsResponse = await fetch(`${API_BASE}/api/patients?page=1&limit=5`, {
                    headers: { 'Authorization': `Bearer ${authToken}` }
                });

                const patientsData = await patientsResponse.json();

                if (patientsResponse.ok && patientsData.success) {
                    result += `âœ… æ‚£è€…åˆ—è¡¨è·å–æˆåŠŸ (${patientsResponse.status})\n`;
                    result += `ğŸ“Š æ‚£è€…æ€»æ•°: ${patientsData.data.pagination.total}\n`;
                    result += `ğŸ“‹ å½“å‰é¡µæ‚£è€…: ${patientsData.data.patients.length}ä¸ª\n\n`;

                    patientsData.data.patients.forEach((patient, index) => {
                        result += `${index + 1}. ${patient.name} (${patient.gender === 'male' ? 'ç”·' : 'å¥³'})\n`;
                        result += `   ğŸ“… å‡ºç”Ÿæ—¥æœŸ: ${patient.birthDate}\n`;
                        result += `   ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ ç›‘æŠ¤äºº: ${patient.guardianName}\n`;
                        result += `   ğŸ“± è”ç³»ç”µè¯: ${patient.guardianPhone}\n`;
                        result += `   ğŸ” æ£€æŸ¥æ¬¡æ•°: ${patient._count.examinations}\n\n`;
                    });
                } else {
                    result += `âŒ æ‚£è€…åˆ—è¡¨è·å–å¤±è´¥: ${patientsData.error}\n`;
                }

                updateResult('patientSection', result, 'success');
                updateStatus('âœ… æ‚£è€…ç®¡ç†APIæµ‹è¯•å®Œæˆ');

            } catch (error) {
                result += `âŒ æ‚£è€…APIæµ‹è¯•å¤±è´¥: ${error.message}\n`;
                updateResult('patientSection', result, 'error');
                updateStatus('âŒ æ‚£è€…ç®¡ç†APIæµ‹è¯•å¤±è´¥');
            }
        }

        async function testStatsAPI() {
            if (!authToken) {
                updateResult('statsSection', 'âŒ è¯·å…ˆå®Œæˆè®¤è¯æµ‹è¯•è·å–Token', 'error');
                return;
            }

            updateStatus('ğŸ“Š æµ‹è¯•ç»Ÿè®¡æ•°æ®API...');
            let result = 'ğŸ“Š ç»Ÿè®¡æ•°æ®APIæµ‹è¯•å¼€å§‹...\n\n';

            try {
                const statsResponse = await fetch(`${API_BASE}/api/stats/overview`, {
                    headers: { 'Authorization': `Bearer ${authToken}` }
                });

                const statsData = await statsResponse.json();

                if (statsResponse.ok && statsData.success) {
                    const stats = statsData.data;
                    result += `âœ… ç»Ÿè®¡æ•°æ®è·å–æˆåŠŸ!\n\n`;
                    result += `ğŸ‘¥ æ€»æ‚£è€…æ•°: ${stats.totalPatients}\n`;
                    result += `ğŸ” æ€»æ£€æŸ¥æ•°: ${stats.totalExaminations}\n`;
                    result += `ğŸ“‹ å·²å®ŒæˆæŠ¥å‘Š: ${stats.completedReports}\n`;
                    result += `â³ å¾…å¤„ç†æŠ¥å‘Š: ${stats.pendingReports}\n`;
                    result += `ğŸ“ˆ å®Œæˆç‡: ${stats.completionRate}%\n`;
                    result += `ğŸ¥ æ´»è·ƒé—¨è¯Š: ${stats.activeClinics}\n`;
                    result += `ğŸ‘¨â€âš•ï¸ æ´»è·ƒåŒ»ç”Ÿ: ${stats.activeDoctors}\n`;
                    result += `ğŸ“… ä»Šæ—¥æ£€æŸ¥: ${stats.todayExaminations}\n\n`;
                    result += `ğŸ“ˆ æœˆå¢é•¿ç‡:\n`;
                    result += `   æ‚£è€…: +${stats.monthlyGrowth.patients}%\n`;
                    result += `   æ£€æŸ¥: +${stats.monthlyGrowth.examinations}%\n`;
                } else {
                    result += `âŒ ç»Ÿè®¡æ•°æ®è·å–å¤±è´¥: ${statsData.error}\n`;
                }

                updateResult('statsSection', result, 'success');
                updateStatus('âœ… ç»Ÿè®¡æ•°æ®APIæµ‹è¯•å®Œæˆ');

            } catch (error) {
                result += `âŒ ç»Ÿè®¡APIæµ‹è¯•å¤±è´¥: ${error.message}\n`;
                updateResult('statsSection', result, 'error');
                updateStatus('âŒ ç»Ÿè®¡æ•°æ®APIæµ‹è¯•å¤±è´¥');
            }
        }

        async function runFullTest() {
            updateStatus('ğŸš€ è¿è¡Œå®Œæ•´ç³»ç»Ÿæµ‹è¯•...');
            updateResult('fullSection', 'ğŸš€ å¼€å§‹å®Œæ•´ç³»ç»Ÿæµ‹è¯•...\n\n', 'info');

            const tests = [
                { name: 'åŸºç¡€åŠŸèƒ½', func: testBasicAPIs },
                { name: 'è®¤è¯ç³»ç»Ÿ', func: testAuthFlow },
                { name: 'é—¨è¯Šç®¡ç†', func: testClinicAPIs },
                { name: 'æ‚£è€…ç®¡ç†', func: testPatientAPIs },
                { name: 'ç»Ÿè®¡æ•°æ®', func: testStatsAPI }
            ];

            let allResults = '';
            let passedTests = 0;

            for (let i = 0; i < tests.length; i++) {
                const test = tests[i];
                updateStatus(`ğŸ§ª æµ‹è¯•è¿›è¡Œä¸­ (${i + 1}/${tests.length}): ${test.name}`);
                
                try {
                    await test.func();
                    allResults += `âœ… ${test.name}æµ‹è¯•: é€šè¿‡\n`;
                    passedTests++;
                } catch (error) {
                    allResults += `âŒ ${test.name}æµ‹è¯•: å¤±è´¥ (${error.message})\n`;
                }

                // ç­‰å¾…ä¸€ä¸‹ï¼Œè®©ç”¨æˆ·çœ‹åˆ°è¿›åº¦
                await new Promise(resolve => setTimeout(resolve, 500));
            }

            const finalResult = `ğŸ¯ å®Œæ•´ç³»ç»Ÿæµ‹è¯•ç»“æœ:\n\n${allResults}\n` +
                              `ğŸ“Š æµ‹è¯•ç»Ÿè®¡:\n` +
                              `   âœ… é€šè¿‡: ${passedTests}/${tests.length}\n` +
                              `   ğŸ“ˆ æˆåŠŸç‡: ${((passedTests / tests.length) * 100).toFixed(1)}%\n\n` +
                              `${passedTests === tests.length ? 
                                'ğŸ‰ æ­å–œ! æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼Œç³»ç»Ÿå®Œå…¨æ­£å¸¸!' : 
                                'âš ï¸ éƒ¨åˆ†æµ‹è¯•å¤±è´¥ï¼Œè¯·æ£€æŸ¥å…·ä½“æµ‹è¯•ç»“æœ'}\n\n` +
                              `ğŸš€ ç³»ç»ŸçŠ¶æ€: ${passedTests >= 4 ? 'ç”Ÿäº§å°±ç»ª' : 'éœ€è¦è°ƒè¯•'}\n` +
                              `ğŸ“… æµ‹è¯•å®Œæˆæ—¶é—´: ${new Date().toLocaleString()}`;

            updateResult('fullSection', finalResult, passedTests === tests.length ? 'success' : 'error');
            updateStatus(passedTests === tests.length ? 
                'ğŸ‰ å®Œæ•´æµ‹è¯•é€šè¿‡ - ç³»ç»Ÿç”Ÿäº§å°±ç»ª!' : 
                `âš ï¸ æµ‹è¯•å®Œæˆ - ${passedTests}/${tests.length}é€šè¿‡`);
        }

        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨è¿è¡ŒåŸºç¡€æµ‹è¯•
        window.onload = function() {
            setTimeout(() => {
                updateStatus('âš¡ è‡ªåŠ¨è¿è¡ŒåŸºç¡€åŠŸèƒ½æµ‹è¯•...');
                testBasicAPIs();
            }, 1000);
        };
    </script>
</body>
</html>
