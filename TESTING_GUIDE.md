# 🧪 儿童口腔AI筛查平台 - 完整测试指南

## ✅ **系统状态**
- 🟢 **后端服务**: http://localhost:3001 (正常运行)
- 🟢 **前端服务**: http://localhost:3000 (正常运行)
- 🟢 **CORS问题**: 已解决
- 🟢 **登录功能**: 完全正常

---

## 🔑 **测试账号**

| 角色 | 邮箱 | 密码 | 权限 |
|------|------|------|------|
| 超级管理员 | `super@admin.com` | `admin123` | 全部功能 |
| 门诊管理员 | `admin@clinic.com` | `admin123` | 门诊管理 |
| 医生 | `doctor@clinic.com` | `doctor123` | 患者检查 |
| 患者 | `patient@example.com` | `patient123` | 个人查看 |

---

## 🎯 **核心功能测试路径**

### 1. **管理员功能测试** ⭐⭐⭐
**登录**: `super@admin.com / admin123`

#### 🏥 门诊管理测试
- **访问**: http://localhost:3000/admin/clinics
- **功能**: 
  - ✅ 查看门诊列表
  - ✅ 搜索门诊
  - ✅ 创建新门诊
  - ✅ 编辑门诊信息
  - ✅ 删除门诊（谨慎操作）

#### 👥 患者管理测试
- **访问**: http://localhost:3000/admin/patients
- **功能**:
  - ✅ 查看所有患者
  - ✅ 搜索患者信息
  - ✅ 创建患者档案
  - ✅ 编辑患者信息
  - ✅ 查看检查统计

### 2. **医生功能测试** ⭐⭐⭐⭐⭐ (核心业务)
**登录**: `doctor@clinic.com / doctor123`

#### 🏥 门诊工作台
- **访问**: http://localhost:3000/clinic
- **功能**: 查看工作台概览、今日统计

#### 👥 患者管理
- **访问**: http://localhost:3000/clinic/patients
- **功能**:
  - ✅ 查看门诊患者列表
  - ✅ 创建新患者档案
  - ✅ 为患者创建新检查

#### 📋 新建检查 ⭐⭐⭐⭐⭐ (最重要功能)
- **访问**: http://localhost:3000/clinic/examination/new
- **测试流程**:
  1. **步骤1: 选择患者**
     - 从列表中选择现有患者
     - 或从患者管理页面直接跳转
  2. **步骤2: 选择检查类型**
     - 口内照片筛查 (AI: 分类+病变检测)
     - 全景X光分析 (AI: 全景片分割)
     - 头颅侧位片分析 (AI: 57点分析)
     - 3D模型分析 (AI: 降采样+特征计算)
  3. **步骤3: 上传文件**
     - 拖拽上传或点击上传
     - 支持多种格式 (JPG, PNG, DICOM, STL, OBJ)
     - 添加检查备注
  4. **步骤4: 确认提交**
     - 检查所有信息
     - 提交创建检查

#### 📊 检查记录管理 ⭐⭐⭐⭐⭐
- **访问**: http://localhost:3000/clinic/examinations
- **功能**:
  - ✅ 查看所有检查记录
  - ✅ 查看实时统计卡片
  - ✅ 按状态/类型筛选
  - ✅ 搜索检查记录
  - ✅ 查看检查详情
  - ✅ AI分析状态跟踪

### 3. **患者功能测试** ⭐⭐⭐
**登录**: `patient@example.com / patient123`

- **访问**: http://localhost:3000/patient
- **功能**: 查看个人仪表盘、检查记录概览

---

## 🔬 **详细测试场景**

### 场景1: 完整的检查流程测试
1. **准备**: 登录医生账号
2. **创建患者**: 访问患者管理，创建新患者
3. **新建检查**: 为该患者创建口内照片检查
4. **上传文件**: 上传3张口内照片
5. **提交检查**: 完成创建，观察系统响应
6. **查看记录**: 在检查记录页面查看新创建的检查

### 场景2: 管理员系统管理测试
1. **门诊管理**: 创建新门诊机构
2. **患者查看**: 查看全系统患者数据
3. **权限验证**: 确认管理员可以访问所有功能

### 场景3: 多角色权限测试
1. **登录不同角色**: 分别用不同账号登录
2. **权限验证**: 确认各角色只能访问对应功能
3. **数据隔离**: 确认数据访问权限正确

---

## 🧪 **API测试**

### 直接API测试 (可选)
```bash
# 1. 健康检查
curl http://localhost:3001/health

# 2. 登录测试
curl -X POST http://localhost:3001/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"doctor@clinic.com","password":"doctor123"}'

# 3. 获取患者列表
curl -H "Authorization: Bearer [token]" \
  http://localhost:3001/api/patients

# 4. 获取检查记录
curl -H "Authorization: Bearer [token]" \
  http://localhost:3001/api/examinations

# 5. 检查统计
curl -H "Authorization: Bearer [token]" \
  http://localhost:3001/api/examinations/stats
```

---

## ⚠️ **注意事项**

### 数据说明
- 当前使用 **Mock数据**，重启服务后数据会重置
- 创建的检查记录会临时保存在内存中
- AI分析结果为模拟数据

### 已知限制
- 文件上传功能已实现UI，但文件不会真实保存
- AI分析为模拟状态，实际需要集成真实AI服务
- 患者年龄基于出生年份简单计算

### 浏览器兼容性
- 推荐使用 **Chrome** 或 **Edge** 浏览器
- 支持现代浏览器的所有功能
- 移动端访问有良好适配

---

## 🐛 **常见问题解决**

### 登录问题
- 确认使用正确的测试账号
- 清除浏览器缓存和Cookie
- 检查网络连接

### 页面加载问题
- 确认前后端服务都在运行
- 检查控制台是否有错误信息
- 刷新页面重新加载

### API请求失败
- 检查CORS配置
- 确认后端服务正常
- 查看网络请求状态

---

## 🎯 **测试重点关注**

### 高优先级测试
1. **登录功能** - 多角色登录测试
2. **新建检查流程** - 4步骤完整测试
3. **检查记录管理** - 列表、筛选、详情
4. **权限控制** - 不同角色权限验证

### 中优先级测试  
1. **管理员功能** - 门诊、患者管理
2. **数据展示** - 统计、图表、状态
3. **搜索筛选** - 各种查询功能
4. **响应式设计** - 移动端适配

### 用户体验测试
1. **界面美观度** - 现代化设计效果
2. **操作流畅度** - 交互响应速度
3. **错误处理** - 异常情况提示
4. **数据一致性** - 前后端数据同步

---

## 📝 **测试反馈记录**

测试时请记录：
- ✅ **正常功能**: 哪些功能工作正常
- ⚠️ **发现问题**: 具体问题描述和复现步骤
- 💡 **改进建议**: 用户体验优化建议
- 🐛 **Bug报告**: 技术问题和错误信息

---

**🎉 现在开始全面测试吧！重点体验新建检查的4步骤流程和现代化界面设计！**
